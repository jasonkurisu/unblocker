<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>bro</title>
</head>
<body>
  <script>
    const win = window.open('about:blank');

    const scriptContent = `
      <!DOCTYPE html>
      <html>
      <head>
        <title>Google.com</title>
      </head>
      <body>
        <script>
          var nuke = false;

          const whitelist = [
            { name: "chris", uid: "6492171" },
            { name: "Bob", uid: "7654321" },
            { name: "Christopher", uid: "9876543" },
          ];

          function generateUID() {
            return Math.floor(1000000 + Math.random() * 9000000).toString();
          }

          function firstTimeSetup() {
            const name = prompt("Please enter your name:");
            if (!name) {
              alert("Name is required.");
              window.close();
              return;
            }
            const uid = generateUID();
            try {
              localStorage.setItem("userName", name);
              localStorage.setItem("userUID", uid);
              alert("Your UID is: " + uid + "\\nPlease reopen the page.");
            } catch (e) {
              alert("Error saving to LS: " + e.message);
            }
            window.close();
          }

          function isWhitelisted(name, uid) {
            return whitelist.some(entry => entry.name === name && entry.uid === uid);
          }

          function initiate22() {
            if (nuke) {
              alert("ERR-503x403");
              window.close();
              return;
            }

            let name, uid;
            try {
              name = localStorage.getItem("userName");
              uid = localStorage.getItem("userUID");
            } catch (e) {
              alert("LS error: " + e.message);
              return;
            }

            if (!name || !uid) {
              firstTimeSetup();
              return;
            }

            if (!isWhitelisted(name, uid)) {
              alert(name+" Err-403 ("+uid+")");
              window.close();
              return;
            }

            alert("Wellcome! "+name);

            const main = "https://raw.githubusercontent.com/jasonkurisu/unblocker/refs/heads/main/index.html";
            const fallback = "https://cdn.jsdelivr.net/gh/Blobby-Boi/ExtPrint3r/index.html";

            fetch(main)
              .then(response => {
                if (!response.ok) throw new Error("Primary URL failed");
                return response.text();
              })
              .catch(err => {
                alert("Primary failed: " + err.message);
                return fetch(fallback).then(response => {
                  if (!response.ok) throw new Error("Fallback URL failed");
                  return response.text();
                }).catch(err => {
                  alert("Fallback failed: " + err.message);
                  throw err;
                });
              })
              .then(html => {
                document.open();
                document.write(html);
                document.close();
              }).catch(err => {
                alert("Final error loading content: " + err.message);
              });
          }

          initiate22();
        <\/script>
      </body>
      </html>
    `;

    win.document.write(scriptContent);
    win.document.close();
    window.close()
  </script>
</body>
</html>
